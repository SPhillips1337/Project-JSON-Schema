{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Patched Project JSON Schema (extends upstream)",
  "description": "Non-breaking extensions to the upstream Project-JSON schema to cover project-specific keys used in this repo.",
  "allOf": [
    { "$ref": "https://raw.githubusercontent.com/SPhillips1337/Project-JSON-Schema/main/schema/project.schema.json" },
    {
      "type": "object",
      "properties": {
        "status": { "type": "string" },
        "concept": { "type": "string" },
        "current_goals": { "type": "array", "items": { "type": "string" } },
        "key_files": { "type": "object", "additionalProperties": { "type": "string" } },
        "rarity_system": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "chance": { "type": "number", "minimum": 0, "maximum": 100 },
              "colors": { "type": "string" },
              "traits": { "type": ["string", "array"], "items": { "type": "string" } }
            },
            "required": ["chance"]
          }
        },
        "generation_modes": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "command": { "type": "string" },
              "url": { "type": "string", "format": "uri" },
              "description": { "type": "string" },
              "features": { "type": "array", "items": { "type": "string" } },
              "time": { "type": ["string", "number"] }
            }
          }
        },
        "features": {
          "type": "object",
          "properties": {
            "completed": { "type": "array", "items": { "type": "string" } },
            "demo_ready": { "type": "array", "items": { "type": "string" } },
            "future_enhancements": { "type": "array", "items": { "type": "string" } }
          }
        },
        "demo_stats": {
          "type": "object",
          "properties": {
            "total_generated": { "type": "integer" },
            "generation_success_rate": { "type": ["string", "number"] },
            "average_generation_time": { "type": ["string", "number"] },
            "rarity_breakdown": { "type": "object", "additionalProperties": { "type": "string" } }
          }
        },
        "progress_percent": { "type": "number", "minimum": 0, "maximum": 100 },
        "progress_state": { "type": "string" },
        "next_version_goals": { "type": ["string", "array"], "items": { "type": "string" } }
      },
      "additionalProperties": true
    }
  ]
}
